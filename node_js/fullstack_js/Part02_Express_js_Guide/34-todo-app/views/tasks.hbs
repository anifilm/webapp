<div class="menu">
  <h2>Menu</h2>
  <ul class="nav nav-pills">
    <li>
      <a href="/">Home</a>
    </li>
    <li class="active">
      <a href="/tasks">Todo List</a>
    </li>
    <li>
      <a href="/tasks/completed">Completed</a>
    </li>
  </ul>
</div>

<hr />

<div class="list">
  <div class="item add-task">
    <div class="action">
      <form action="/tasks" method="POST">
        <input type="hidden" name="_csrf" value="{{_csrfToken}}">
        <input type="hidden" name="all_done" value="true">
        <button type="submit" class="btn btn-success btn-xs">all done</button>
      </form>
    </div>
    <form action="/tasks" method="POST">
      <input type="hidden" name="_csrf" value="{{_csrfToken}}">
      <div class="name">
        <input type="text" name="name" placeholder="Add a new task">
      </div>
      <div class="add">
        <button type="submit" class="btn btn-primary btn-sm">add</button>
      </div>
    </form>
  </div>
  {{#if tasks}}
    {{#each tasks as |task index|}}
    <div class="item">
      <div class="action">
        <form action="/tasks/{{task._id}}" method="POST">
          <input type="hidden" name="id" value="{{task._id}}">
          <input type="hidden" name="completed" value="true">
          <input type="hidden" name="_csrf" value="{{../_csrfToken}}">
          <button type="submit" class="btn btn-success btn-xs task-done">done</button>
        </form>
      </div>
      <div class="num"><span>{{num index}}</span>.&nbsp;</div>
      <div class="name">
        {{task.name}}
        <span class="time">
          <small>(Created at: {{dateFormat task.createTime }})</small>
        </span>
      </div>
      <div class="delete">
        <a href="" class="btn btn-danger btn-xs task-delete" data-task-id="{{task._id}}" data-csrf="{{../_csrfToken}}">delete</a>
      </div>
    </div>
    {{/each}}
  {{else}}
  <div class="item">
    No tasks.
  </div>
  {{/if}}
</div>
